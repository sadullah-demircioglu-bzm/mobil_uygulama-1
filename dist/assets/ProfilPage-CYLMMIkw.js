import{u as de,r as l,j as e,I as ue,a as y,G as he,H as pe,J as L,g as D,h as w,c as R,z as X,y as p,l as m,m as K,A as me,B as fe,d as h,K as B,L as H,M as V,N as G,O as Y,e as xe}from"./index-Bxnv563k.js";import{m as j}from"./mockData-B6kWifXr.js";const Me=({onLogout:J})=>{const U=de(),[je,ge]=l.useState(!1),[$,f]=l.useState(!1),[q,x]=l.useState(!1),[Ne,ke]=l.useState(""),[Ie,_e]=l.useState(""),[ve,De]=l.useState(""),[g,M]=l.useState(""),[S,F]=l.useState(j.telefon),[b,C]=l.useState("phone"),[N,P]=l.useState(Array(6).fill("")),d=l.useRef([]),[k,E]=l.useState(""),[z,Q]=l.useState(j.eposta),[T,O]=l.useState("email"),[I,A]=l.useState(Array(6).fill("")),u=l.useRef([]),[W,t]=l.useState(!1),[Z,o]=l.useState(""),[ee,i]=l.useState("success"),se=()=>{if(!g){o("Lütfen telefon numaranızı giriniz."),i("danger"),t(!0);return}if(g.replace(/\D/g,"").length!==10){o("Telefon numarası 10 haneli olmalıdır."),i("danger"),t(!0);return}o("Doğrulama kodu gönderildi."),i("success"),t(!0),C("otp"),setTimeout(()=>{d.current[0]&&d.current[0].focus()},50)},ae=(s,n)=>{var c;const a=n.replace(/\D/g,"").slice(0,1),r=[...N];r[s]=a,P(r),a&&s<d.current.length-1&&((c=d.current[s+1])==null||c.focus())},ne=(s,n)=>{var a,r,c;n.key==="Backspace"&&!N[s]&&s>0&&((a=d.current[s-1])==null||a.focus()),n.key==="ArrowLeft"&&s>0&&((r=d.current[s-1])==null||r.focus()),n.key==="ArrowRight"&&s<d.current.length-1&&((c=d.current[s+1])==null||c.focus())},le=()=>{const s=N.join("");if(s.length!==6){o("Lütfen 6 haneli kodu giriniz."),i("danger"),t(!0);return}s==="123456"?(F(g),o("Telefonunuz güncellendi."),i("success"),t(!0),f(!1),_()):(o("Hatalı doğrulama kodu."),i("danger"),t(!0))},_=()=>{C("phone"),P(Array(6).fill("")),M("")},te=()=>{if(!k){o("Lütfen e-posta adresinizi giriniz."),i("danger"),t(!0);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k)){o("Geçerli bir e-posta adresi giriniz."),i("danger"),t(!0);return}o("Doğrulama kodu gönderildi."),i("success"),t(!0),O("otp"),setTimeout(()=>{u.current[0]&&u.current[0].focus()},50)},oe=(s,n)=>{var c;const a=n.replace(/\D/g,"").slice(0,1),r=[...I];r[s]=a,A(r),a&&s<u.current.length-1&&((c=u.current[s+1])==null||c.focus())},ie=(s,n)=>{var a,r,c;n.key==="Backspace"&&!I[s]&&s>0&&((a=u.current[s-1])==null||a.focus()),n.key==="ArrowLeft"&&s>0&&((r=u.current[s-1])==null||r.focus()),n.key==="ArrowRight"&&s<u.current.length-1&&((c=u.current[s+1])==null||c.focus())},re=()=>{const s=I.join("");if(s.length!==6){o("Lütfen 6 haneli kodu giriniz."),i("danger"),t(!0);return}s==="123456"?(Q(k),o("E-posta adresiniz güncellendi."),i("success"),t(!0),x(!1),v()):(o("Hatalı doğrulama kodu."),i("danger"),t(!0))},v=()=>{O("email"),A(Array(6).fill("")),E("")},ce=()=>{localStorage.removeItem("bezmialem_auth"),J(),U.replace("/login")};return e.jsx(ue,{children:e.jsxs(y,{className:"ion-padding profil-page",children:[e.jsx(he,{className:"stats-grid",children:e.jsxs(pe,{children:[e.jsx(L,{size:"6",children:e.jsx(D,{className:"stat-card",children:e.jsxs(w,{children:[e.jsx("div",{className:"stat-value",children:"12"}),e.jsx("div",{className:"stat-label",children:"Toplam Tedavi"})]})})}),e.jsx(L,{size:"6",children:e.jsx(D,{className:"stat-card",children:e.jsxs(w,{children:[e.jsx("div",{className:"stat-value",children:"3"}),e.jsx("div",{className:"stat-label",children:"Bu Ay"})]})})})]})}),e.jsxs("div",{className:"section",children:[e.jsx(R,{children:e.jsx("h3",{className:"section-title",children:"Kişisel Bilgiler"})}),e.jsx(D,{children:e.jsx(w,{children:e.jsxs(X,{lines:"none",children:[e.jsx(p,{children:e.jsxs(m,{children:[e.jsx("p",{className:"info-label",children:"Ad Soyad"}),e.jsxs("h3",{className:"info-value",children:[j.ad," ",j.soyad]})]})}),e.jsx(p,{children:e.jsxs(m,{children:[e.jsx("p",{className:"info-label",children:"T.C. Kimlik No"}),e.jsx("h3",{className:"info-value",children:j.tcKimlik})]})}),S&&e.jsx(p,{children:e.jsxs(m,{children:[e.jsx("p",{className:"info-label",children:"Telefon"}),e.jsx("h3",{className:"info-value",children:S})]})}),z&&e.jsx(p,{children:e.jsxs(m,{children:[e.jsx("p",{className:"info-label",children:"E-posta"}),e.jsx("h3",{className:"info-value",children:z})]})})]})})})]}),e.jsxs("div",{className:"section",children:[e.jsx(R,{children:e.jsx("h3",{className:"section-title",children:"Hesap Ayarları"})}),e.jsx(D,{children:e.jsx(w,{children:e.jsxs(X,{lines:"full",children:[e.jsxs(p,{button:!0,detail:!0,onClick:()=>f(!0),children:[e.jsx(K,{slot:"start",icon:me}),e.jsx(m,{children:"Telefon Değiştir"})]}),e.jsxs(p,{button:!0,detail:!0,onClick:()=>x(!0),children:[e.jsx(K,{slot:"start",icon:fe}),e.jsx(m,{children:"E-posta Değiştir"})]})]})})})]}),e.jsx(h,{expand:"block",fill:"outline",color:"danger",onClick:ce,className:"logout-button",children:"Çıkış Yap"}),e.jsxs(B,{isOpen:$,onDidDismiss:()=>{f(!1),_()},children:[e.jsx(H,{children:e.jsx(V,{children:e.jsx(G,{children:"Telefon Değiştir"})})}),e.jsxs(y,{className:"ion-padding phoneModal__content",children:[b==="phone"&&e.jsxs("div",{className:"phoneModal__step phoneModal__stepPhone",children:[e.jsx(Y,{label:"Yeni Telefon Numarası",labelPlacement:"stacked",type:"tel",maxlength:10,value:g,onIonInput:s=>M((s.detail.value||"").replace(/\D/g,"")),className:"custom-input",placeholder:"5XX XXX XX XX"}),e.jsx(h,{expand:"block",className:"primary-button",onClick:se,children:"Devam Et"}),e.jsx(h,{expand:"block",fill:"clear",onClick:()=>{f(!1),_()},children:"Vazgeç"})]}),b==="otp"&&e.jsxs("div",{className:"phoneModal__step phoneModal__stepOtp",children:[e.jsx("p",{className:"phoneModal__instruction",children:"SMS ile gönderilen 6 haneli kodu giriniz."}),e.jsx("div",{className:"phoneModal__otpInputs",children:N.map((s,n)=>e.jsx("input",{ref:a=>{a&&(d.current[n]=a)},inputMode:"numeric",pattern:"[0-9]*",maxLength:1,className:"phoneModal__otpInput",value:s,onChange:a=>ae(n,a.target.value),onKeyDown:a=>ne(n,a)},n))}),e.jsx(h,{expand:"block",className:"primary-button",onClick:le,children:"Doğrula ve Güncelle"}),e.jsx(h,{expand:"block",fill:"clear",onClick:()=>{f(!1),_()},children:"Vazgeç"})]})]})]}),e.jsxs(B,{isOpen:q,onDidDismiss:()=>{x(!1),v()},children:[e.jsx(H,{children:e.jsx(V,{children:e.jsx(G,{children:"E-posta Değiştir"})})}),e.jsxs(y,{className:"ion-padding phoneModal__content",children:[T==="email"&&e.jsxs("div",{className:"phoneModal__step phoneModal__stepPhone",children:[e.jsx(Y,{label:"Yeni E-posta",labelPlacement:"stacked",type:"email",value:k,onIonInput:s=>E(s.detail.value||""),className:"custom-input",placeholder:"ornek@eposta.com"}),e.jsx(h,{expand:"block",className:"primary-button",onClick:te,children:"Devam Et"}),e.jsx(h,{expand:"block",fill:"clear",onClick:()=>{x(!1),v()},children:"Vazgeç"})]}),T==="otp"&&e.jsxs("div",{className:"phoneModal__step phoneModal__stepOtp",children:[e.jsx("p",{className:"phoneModal__instruction",children:"E-posta adresinize gönderilen 6 haneli kodu giriniz."}),e.jsx("div",{className:"phoneModal__otpInputs",children:I.map((s,n)=>e.jsx("input",{ref:a=>{a&&(u.current[n]=a)},inputMode:"numeric",pattern:"[0-9]*",maxLength:1,className:"phoneModal__otpInput",value:s,onChange:a=>oe(n,a.target.value),onKeyDown:a=>ie(n,a)},n))}),e.jsx(h,{expand:"block",className:"primary-button",onClick:re,children:"Doğrula ve Güncelle"}),e.jsx(h,{expand:"block",fill:"clear",onClick:()=>{x(!1),v()},children:"Vazgeç"})]})]})]}),e.jsx(xe,{isOpen:W,onDidDismiss:()=>t(!1),message:Z,duration:2500,position:"top",color:ee})]})})};export{Me as default};
