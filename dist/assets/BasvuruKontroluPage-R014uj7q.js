import{r as t,u as K,j as e,I,a as X,c as o,d as p,f as w,g as D,h as B,e as E}from"./index-Bxnv563k.js";const L=()=>{const[i,x]=t.useState(""),[u,g]=t.useState(""),[c,d]=t.useState(!1),[n,m]=t.useState(null),[j,r]=t.useState(!1),[f,l]=t.useState(""),k=K(),v=s=>{if(s.length!==11||s[0]==="0")return!1;const a=s.split("").map(Number);if(a.slice(0,10).reduce((C,z)=>C+z,0)%10!==a[10])return!1;const S=a[0]+a[2]+a[4]+a[6]+a[8],y=a[1]+a[3]+a[5]+a[7];return(S*7-y)%10===a[9]},N=async s=>{if(s.preventDefault(),!i||!u){l("Lütfen tüm alanları doldurunuz."),r(!0);return}if(i.length!==11){l("T.C. Kimlik No 11 haneli olmalıdır."),r(!0);return}if(!v(i)){l("Geçersiz T.C. Kimlik No."),r(!0);return}if(u.length!==10){l("Telefon numarası 10 haneli olmalıdır."),r(!0);return}d(!0),m(null);try{await new Promise(h=>setTimeout(h,1500)),m({durum:"onaylandi",mesaj:"Başvurunuz onaylanmıştır.",basvuruTarihi:"15.11.2025",sonGuncelleme:"16.11.2025",aciklama:"Kartınız hazırlanmaktadır. En kısa sürede tarafınıza ulaştırılacaktır."})}catch{l("Sorgulama sırasında bir hata oluştu."),r(!0)}finally{d(!1)}},b=s=>{switch(s){case"onaylandi":return"status-approved";case"beklemede":return"status-pending";case"reddedildi":return"status-rejected";default:return"status-notfound"}},T=s=>{switch(s){case"onaylandi":return"Onaylandı";case"beklemede":return"Beklemede";case"reddedildi":return"Reddedildi";default:return"Bulunamadı"}};return e.jsx(I,{children:e.jsx(X,{className:"ion-padding basvuru-kontrolu-page",children:e.jsxs("div",{className:"basvuru-container",children:[e.jsxs(o,{children:[e.jsx("h2",{className:"page-title",children:"Başvuru Durumunu Sorgula"}),e.jsx("p",{className:"page-description",children:"Kart başvurunuzun durumunu öğrenmek için T.C. Kimlik No ve telefon numaranızı giriniz."})]}),e.jsxs("form",{onSubmit:N,className:"basvuru-form",children:[e.jsxs("div",{className:"input-wrapper",children:[e.jsx("label",{htmlFor:"tc-kimlik",className:"input-label",children:"T.C. Kimlik No"}),e.jsx("input",{id:"tc-kimlik",type:"text",maxLength:11,value:i,onChange:s=>x(s.target.value.replace(/\D/g,"")),className:"custom-input",placeholder:"11 haneli kimlik numaranız",inputMode:"numeric"})]}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("label",{htmlFor:"telefon",className:"input-label",children:"Telefon Numarası"}),e.jsx("input",{id:"telefon",type:"tel",maxLength:10,value:u,onChange:s=>g(s.target.value.replace(/\D/g,"")),className:"custom-input",placeholder:"5XX XXX XX XX",inputMode:"numeric"})]}),e.jsx(p,{expand:"block",type:"submit",className:"submit-button",disabled:c,children:c?e.jsx(w,{name:"crescent"}):"Sorgula"})]}),n&&e.jsx(D,{className:"result-card",children:e.jsxs(B,{children:[e.jsx("div",{className:`status-badge ${b(n.durum)}`,children:T(n.durum)}),e.jsx(o,{children:e.jsx("h3",{className:"result-title",children:n.mesaj})}),n.basvuruTarihi&&e.jsxs("div",{className:"result-detail",children:[e.jsx("p",{className:"detail-label",children:"Başvuru Tarihi"}),e.jsx("p",{className:"detail-value",children:n.basvuruTarihi})]}),n.sonGuncelleme&&e.jsxs("div",{className:"result-detail",children:[e.jsx("p",{className:"detail-label",children:"Son Güncelleme"}),e.jsx("p",{className:"detail-value",children:n.sonGuncelleme})]}),n.aciklama&&e.jsx("div",{className:"result-description",children:e.jsx(o,{color:"medium",children:e.jsx("p",{children:n.aciklama})})})]})}),e.jsx(p,{expand:"block",color:"medium",style:{borderRadius:10,height:48,marginTop:20,fontWeight:600},onClick:()=>k.push("/login"),children:"Vazgeç"}),e.jsx(E,{isOpen:j,onDidDismiss:()=>r(!1),message:f,duration:3e3,color:"danger",position:"top"})]})})})};export{L as default};
